<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brain Battle: Strategy & Chance Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <div class="start-content">
                <!-- Logo -->
                <div class="logo">
                    <div class="logo-icon">üéØ</div>
                    <h1>Brain Battle</h1>
                    <p class="tagline">Strategy ‚Ä¢ Chance ‚Ä¢ Control ‚Ä¢ 2 Player Battle</p>
                </div>
                
                <!-- Game Features -->
                <div class="game-features">
                    <div class="feature">
                        <div class="feature-icon">üé≤</div>
                        <div class="feature-text">Chance: Hidden Points</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">‚öîÔ∏è</div>
                        <div class="feature-text">Control: Special Powers</div>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üß†</div>
                        <div class="feature-text">Strategy: Risk vs Reward</div>
                    </div>
                </div>
                
                <!-- Code Input Section -->
                <div class="code-section">
                    <h3><i class="fas fa-key"></i> Enter Quiz Code</h3>
                    
                    <div class="code-input-group">
                        <!-- Code Display -->
                        <div class="code-display" id="code-display">
                            <div class="code-digit" data-index="0">_</div>
                            <div class="code-digit" data-index="1">_</div>
                            <div class="code-digit" data-index="2">_</div>
                            <div class="code-digit" data-index="3">_</div>
                            <div class="code-digit" data-index="4">_</div>
                            <div class="code-digit" data-index="5">_</div>
                        </div>
                        
                        <!-- Virtual Keypad -->
                        <div class="code-keypad">
                            <div class="keypad-row">
                                <button class="keypad-btn" data-key="1" aria-label="Number 1">1</button>
                                <button class="keypad-btn" data-key="2" aria-label="Number 2">2</button>
                                <button class="keypad-btn" data-key="3" aria-label="Number 3">3</button>
                            </div>
                            <div class="keypad-row">
                                <button class="keypad-btn" data-key="4" aria-label="Number 4">4</button>
                                <button class="keypad-btn" data-key="5" aria-label="Number 5">5</button>
                                <button class="keypad-btn" data-key="6" aria-label="Number 6">6</button>
                            </div>
                            <div class="keypad-row">
                                <button class="keypad-btn" data-key="7" aria-label="Number 7">7</button>
                                <button class="keypad-btn" data-key="8" aria-label="Number 8">8</button>
                                <button class="keypad-btn" data-key="9" aria-label="Number 9">9</button>
                            </div>
                            <div class="keypad-row">
                                <button class="keypad-btn" data-key="0" aria-label="Number 0">0</button>
                                <button class="keypad-btn" id="backspace" aria-label="Backspace">
                                    <i class="fas fa-backspace"></i>
                                </button>
                                <button class="keypad-btn" id="clear" aria-label="Clear">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="code-actions">
                            <button id="validate-code" class="btn primary-btn" disabled>
                                <span class="btn-emoji">‚úÖ</span>
                                Validate Code
                            </button>
                            <button id="rescan-quizzes" class="btn secondary-btn">
                                <span class="btn-emoji">üîÑ</span>
                                Rescan Quizzes
                            </button>
                        </div>
                    </div>
                    
                    <!-- Error Message -->
                    <div id="start-error" class="error-message"></div>
                </div>
                
                <!-- Selected Quiz Info -->
                <div id="quiz-info" class="quiz-info" style="display: none;">
                    <h4><i class="fas fa-clipboard-list"></i> Selected Quiz</h4>
                    <div class="quiz-details">
                        <div class="detail-row">
                            <span class="detail-label">Title:</span>
                            <span id="quiz-title-display" class="detail-value">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Subject:</span>
                            <span id="quiz-grade-display" class="detail-value">-</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Questions:</span>
                            <span id="quiz-count-display" class="detail-value">-</span>
                        </div>
                    </div>
                </div>
                
                <!-- Start Game Button -->
                <div class="start-action">
                    <button id="start-game" class="btn start-btn" disabled>
                        <span class="btn-emoji">üöÄ</span>
                        Start Battle!
                    </button>
                </div>
                
                <!-- Quick Demo Codes -->
                <div class="demo-codes">
                    <h4><i class="fas fa-bolt"></i> Quick Start Codes</h4>
                    <div class="demo-buttons">
                        <button class="demo-btn" data-code="304021">Math: Algebra</button>
                        <button class="demo-btn" data-code="304022">Math: Advanced</button>
                        <button class="demo-btn" data-code="101021">Primary: Basics</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Game Header -->
            <div class="game-topbar">
                <div class="quiz-title">
                    <span id="game-quiz-title">Quiz Title</span>
                    <span class="question-counter">
                        <i class="fas fa-question-circle"></i>
                        Q: <span id="current-q">1</span>/<span id="total-q">5</span>
                    </span>
                </div>
                <div class="chance-control-display">
                    <div class="chance-meter">
                        <span class="meter-icon">üé≤</span>
                        <span class="meter-label">Chance</span>
                        <div class="meter-bar">
                            <div class="meter-fill" id="chance-meter"></div>
                        </div>
                    </div>
                    <div class="control-meter">
                        <span class="meter-icon">‚öîÔ∏è</span>
                        <span class="meter-label">Control</span>
                        <div class="meter-bar">
                            <div class="meter-fill" id="control-meter"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Players Display with Powers -->
            <div class="players-display">
                <!-- Player 1 with Powers -->
                <div class="player active" id="player1">
                    <div class="player-header">
                        <span class="player-emoji">üëë</span>
                        <span class="player-name">Player 1</span>
                        <span class="turn-indicator">‚ú®</span>
                    </div>
                    <div class="player-score">0</div>
                    <div class="score-label">Score</div>
                    
                    <!-- Special Powers -->
                    <div class="player-powers">
                        <div class="power" data-power="reveal" title="Reveal Box">
                            <span class="power-icon">üîç</span>
                            <span class="power-count" id="p1-reveal">2</span>
                        </div>
                        <div class="power" data-power="double" title="Double Points">
                            <span class="power-icon">‚úåÔ∏è</span>
                            <span class="power-count" id="p1-double">1</span>
                        </div>
                        <div class="power" data-power="block" title="Block Opponent">
                            <span class="power-icon">üõ°Ô∏è</span>
                            <span class="power-count" id="p1-block">1</span>
                        </div>
                        <div class="power" data-power="swap" title="Swap Boxes">
                            <span class="power-icon">üîÑ</span>
                            <span class="power-count" id="p1-swap">1</span>
                        </div>
                    </div>
                </div>
                
                <div class="vs">VS</div>
                
                <!-- Player 2 with Powers -->
                <div class="player" id="player2">
                    <div class="player-header">
                        <span class="player-emoji">üëë</span>
                        <span class="player-name">Player 2</span>
                        <span class="turn-indicator">‚ú®</span>
                    </div>
                    <div class="player-score">0</div>
                    <div class="score-label">Score</div>
                    
                    <!-- Special Powers -->
                    <div class="player-powers">
                        <div class="power" data-power="reveal" title="Reveal Box">
                            <span class="power-icon">üîç</span>
                            <span class="power-count" id="p2-reveal">2</span>
                        </div>
                        <div class="power" data-power="double" title="Double Points">
                            <span class="power-icon">‚úåÔ∏è</span>
                            <span class="power-count" id="p2-double">1</span>
                        </div>
                        <div class="power" data-power="block" title="Block Opponent">
                            <span class="power-icon">üõ°Ô∏è</span>
                            <span class="power-count" id="p2-block">1</span>
                        </div>
                        <div class="power" data-power="swap" title="Swap Boxes">
                            <span class="power-icon">üîÑ</span>
                            <span class="power-count" id="p2-swap">1</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Special Power Controls -->
            <div class="power-controls">
                <div class="power-controls-header">
                    <h3><span class="power-controls-icon">‚ö°</span> Special Powers</h3>
                    <div class="power-help">Use powers strategically!</div>
                </div>
                <div class="power-buttons">
                    <button class="power-btn" data-power="reveal">
                        <span class="power-btn-icon">üîç</span>
                        <span class="power-btn-text">Reveal Box</span>
                        <span class="power-btn-desc">See 1 box's points</span>
                    </button>
                    <button class="power-btn" data-power="double">
                        <span class="power-btn-icon">‚úåÔ∏è</span>
                        <span class="power-btn-text">Double Points</span>
                        <span class="power-btn-desc">2x points from next box</span>
                    </button>
                    <button class="power-btn" data-power="block">
                        <span class="power-btn-icon">üõ°Ô∏è</span>
                        <span class="power-btn-text">Block</span>
                        <span class="power-btn-desc">Opponent loses 1 turn</span>
                    </button>
                    <button class="power-btn" data-power="swap">
                        <span class="power-btn-icon">üîÑ</span>
                        <span class="power-btn-text">Swap</span>
                        <span class="power-btn-desc">Exchange boxes with opponent</span>
                    </button>
                </div>
                <div class="active-power-display" id="active-power-display">
                    No active power
                </div>
            </div>
            
            <!-- Main Game Content -->
            <div class="game-content">
                <!-- Question Card -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="q-label">
                            <i class="fas fa-brain"></i>
                            Question
                        </span>
                        <span class="points-badge" id="question-points">
                            <i class="fas fa-star"></i>
                            Base: <span id="base-points">10</span> pts
                        </span>
                    </div>
                    <div id="question-text" class="question-text">
                        Question will appear here...
                    </div>
                    
                    <!-- Answer Options -->
                    <div id="options-container" class="options-grid">
                        <!-- Options will be added here -->
                    </div>
                </div>
                
                <!-- Hidden Points Grid with Risk Levels -->
                <div class="points-section">
                    <div class="points-header">
                        <h3><span class="points-icon">üì¶</span> Hidden Points Grid</h3>
                        <div class="points-help">
                            <span class="risk-low">Low Risk</span> ‚Ä¢ 
                            <span class="risk-medium">Medium Risk</span> ‚Ä¢ 
                            <span class="risk-high">High Risk</span>
                        </div>
                        <div class="selection-info" id="selection-info">
                            <i class="fas fa-mouse-pointer"></i>
                            Boxes selected: <span id="selected-count">0</span>/3 ‚Ä¢ 
                            <span id="risk-indicator">Risk: Low</span>
                        </div>
                    </div>
                    
                    <!-- Points Grid with Zones -->
                    <div class="points-grid-container">
                        <div class="grid-zone low-risk-zone">
                            <div class="zone-label">Low Risk</div>
                            <div class="points-grid" id="points-grid-low">
                                <!-- Low risk boxes (1-6) -->
                            </div>
                        </div>
                        <div class="grid-zone high-risk-zone">
                            <div class="zone-label">High Risk</div>
                            <div class="points-grid" id="points-grid-high">
                                <!-- High risk boxes (7-12) -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Points Controls -->
                    <div class="points-controls">
                        <button id="clear-selections" class="btn secondary-btn">
                            <span class="btn-emoji">üóëÔ∏è</span>
                            Clear Selections
                        </button>
                        <div class="points-summary">
                            <div class="points-total" id="points-total">
                                <i class="fas fa-coins"></i>
                                Potential Points: <span id="potential-points">0</span>
                            </div>
                            <div class="multiplier-display" id="multiplier-display">
                                <i class="fas fa-bolt"></i>
                                Multiplier: <span id="multiplier-value">1x</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Game Controls -->
            <div class="game-controls">
                <div class="control-group">
                    <button id="submit-answer" class="btn primary-btn" disabled>
                        <span class="btn-emoji">üì§</span>
                        Submit Answer
                    </button>
                    <button id="next-question" class="btn secondary-btn" style="display: none;">
                        <span class="btn-emoji">‚û°Ô∏è</span>
                        Next Question
                    </button>
                    <button id="skip-question" class="btn warning-btn" style="display: none;">
                        <span class="btn-emoji">‚è≠Ô∏è</span>
                        Skip (Risk Points)
                    </button>
                </div>
                <div class="home-controls">
                    <button id="home-btn" class="btn home-btn">
                        <span class="btn-emoji">üè†</span>
                        Back to Home
                    </button>
                </div>
            </div>
            
            <!-- Feedback Area -->
            <div id="feedback" class="feedback-area">
                <div class="feedback-placeholder">
                    <span class="feedback-icon">üí°</span>
                    Select boxes (1-3) then choose an answer!
                </div>
            </div>
            
            <!-- Results Display -->
            <div id="results-display" class="results-area" style="display: none;">
                <div class="results-header">
                    <h3><span class="results-icon">üéØ</span> Box Results</h3>
                </div>
                <div id="box-results" class="box-results">
                    <!-- Box results will be shown here -->
                </div>
                <div class="total-earned" id="total-earned">
                    <i class="fas fa-trophy"></i>
                    Total Earned: <span>0</span> points
                    <div class="power-effects" id="power-effects"></div>
                </div>
            </div>
            
            <!-- Chance Events Popup -->
            <div id="chance-popup" class="chance-popup" style="display: none;">
                <div class="chance-popup-content">
                    <div class="chance-icon" id="chance-event-icon">üé≤</div>
                    <h3 id="chance-event-title">Chance Event!</h3>
                    <p id="chance-event-desc">Something unexpected happens!</p>
                    <button id="close-chance" class="btn primary-btn">Continue</button>
                </div>
            </div>
        </div>
        
        <!-- Game Over Screen -->
        <div id="game-over" class="screen">
            <div class="game-over-content">
                <!-- Victory Banner -->
                <div class="victory-banner">
                    <div id="winner-trophy" class="trophy">üèÜ</div>
                    <div id="winner-message" class="winner-message">Game Over!</div>
                    <div id="winner-style" class="winner-style"></div>
                </div>
                
                <!-- Final Scores -->
                <div class="final-scores">
                    <div class="final-player">
                        <div class="final-player-header">
                            <span class="final-emoji">üëë</span>
                            <span class="final-name">Player 1</span>
                        </div>
                        <div id="final-score1" class="final-score">0</div>
                        <div class="final-powers-used">
                            Powers Used: <span id="final-powers1">0</span>
                        </div>
                    </div>
                    
                    <div class="vs-final">VS</div>
                    
                    <div class="final-player">
                        <div class="final-player-header">
                            <span class="final-emoji">üëë</span>
                            <span class="final-name">Player 2</span>
                        </div>
                        <div id="final-score2" class="final-score">0</div>
                        <div class="final-powers-used">
                            Powers Used: <span id="final-powers2">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- Game Statistics -->
                <div class="achievements">
                    <h3><i class="fas fa-trophy"></i> Game Stats</h3>
                    <div id="game-stats" class="stats-grid">
                        <!-- Stats will be added here -->
                    </div>
                    <div class="strategy-stats">
                        <h4><i class="fas fa-chess"></i> Strategy Analysis</h4>
                        <div class="strategy-grid">
                            <div class="strategy-item">
                                <div class="strategy-label">Chance Taken</div>
                                <div class="strategy-value" id="chance-taken">0%</div>
                            </div>
                            <div class="strategy-item">
                                <div class="strategy-label">Control Used</div>
                                <div class="strategy-value" id="control-used">0%</div>
                            </div>
                            <div class="strategy-item">
                                <div class="strategy-label">Risk Reward Ratio</div>
                                <div class="strategy-value" id="risk-reward">0</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Game Over Buttons -->
                <div class="game-over-buttons">
                    <button id="play-again" class="btn primary-btn">
                        <span class="btn-emoji">üîÑ</span>
                        Play Again
                    </button>
                    <button id="new-quiz" class="btn fun-btn">
                        <span class="btn-emoji">üî¢</span>
                        New Code
                    </button>
                    <button id="show-strategy" class="btn strategy-btn">
                        <span class="btn-emoji">üß†</span>
                        Strategy Tips
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <div id="loading-text" class="loading-text">Loading...</div>
                <div id="loading-details" class="loading-details"></div>
            </div>
        </div>
        
        <!-- Strategy Tips Modal -->
        <div id="strategy-modal" class="strategy-modal" style="display: none;">
            <div class="strategy-modal-content">
                <h2><i class="fas fa-chess-knight"></i> Strategy Guide</h2>
                <div class="strategy-tips">
                    <div class="tip">
                        <div class="tip-icon">üé≤</div>
                        <div class="tip-content">
                            <h4>Chance Elements</h4>
                            <p>‚Ä¢ Low risk boxes (1-6) have smaller point ranges</p>
                            <p>‚Ä¢ High risk boxes (7-12) can give huge points or penalties</p>
                            <p>‚Ä¢ Chance events occur randomly (bonus points, extra turns)</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">‚öîÔ∏è</div>
                        <div class="tip-content">
                            <h4>Control Elements</h4>
                            <p>‚Ä¢ Use Reveal to see a box's points before selecting</p>
                            <p>‚Ä¢ Double Points gives 2x points from next box</p>
                            <p>‚Ä¢ Block prevents opponent from using powers next turn</p>
                            <p>‚Ä¢ Swap exchanges your worst box with opponent's best</p>
                        </div>
                    </div>
                    <div class="tip">
                        <div class="tip-icon">üß†</div>
                        <div class="tip-content">
                            <h4>Winning Strategy</h4>
                            <p>‚Ä¢ Balance risk: mix low and high risk boxes</p>
                            <p>‚Ä¢ Save powers for critical moments</p>
                            <p>‚Ä¢ Use Block when opponent is ahead</p>
                            <p>‚Ä¢ Skip questions you're unsure about (with penalty)</p>
                        </div>
                    </div>
                </div>
                <button id="close-strategy" class="btn primary-btn">Got it!</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>